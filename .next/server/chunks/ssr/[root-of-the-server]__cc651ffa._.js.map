{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 111, "column": 0}, "map": {"version":3,"sources":["file:///Users/iqbalrizqi/Desktop/app/next/infra-competition-frontend/src/app/_components/lib/api.ts"],"sourcesContent":["import axios from 'axios';\n\nexport const api = axios.create({\n  baseURL: 'http://localhost:8001/api', // Sesuaikan dengan backendmu\n  withCredentials: true, // Jika perlu untuk cookie atau session\n});\n\n// JWT Token? Tambahkan interceptor\napi.interceptors.request.use((config) => {\n  const token = localStorage.getItem('token'); // Or context\n  if (token) config.headers.Authorization = `Bearer ${token}`;\n  return config;\n});\n\nexport const setAuthToken = (token: string) => {\n  if (token) {\n    localStorage.setItem('token', token);\n  } else {\n    localStorage.removeItem('token');\n  }\n};\n\n"],"names":[],"mappings":";;;;AAAA;;AAEO,MAAM,MAAM,qIAAA,CAAA,UAAK,CAAC,MAAM,CAAC;IAC9B,SAAS;IACT,iBAAiB;AACnB;AAEA,mCAAmC;AACnC,IAAI,YAAY,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;IAC5B,MAAM,QAAQ,aAAa,OAAO,CAAC,UAAU,aAAa;IAC1D,IAAI,OAAO,OAAO,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,EAAE,OAAO;IAC3D,OAAO;AACT;AAEO,MAAM,eAAe,CAAC;IAC3B,IAAI,OAAO;QACT,aAAa,OAAO,CAAC,SAAS;IAChC,OAAO;QACL,aAAa,UAAU,CAAC;IAC1B;AACF","debugId":null}},
    {"offset": {"line": 140, "column": 0}, "map": {"version":3,"sources":["file:///Users/iqbalrizqi/Desktop/app/next/infra-competition-frontend/src/app/admin/components/EditorNew.tsx"],"sourcesContent":["\"use client\";\n\nimport './styles.css'\n\nimport { TextStyleKit } from '@tiptap/extension-text-style'\nimport Image from '@tiptap/extension-image'\nimport type { Editor } from '@tiptap/react'\nimport { EditorContent, useEditor, useEditorState } from '@tiptap/react'\nimport StarterKit from '@tiptap/starter-kit'\nimport React, { useCallback, useEffect } from 'react'\n\nconst extensions = [\n  TextStyleKit, \n  StarterKit,\n  Image.configure({\n    inline: true,\n    allowBase64: false,\n  })\n]\n\nfunction MenuBar({ editor }: { editor: Editor }) {\n  const editorState = useEditorState({\n    editor,\n    selector: ctx => {\n      return {\n        isBold: ctx.editor.isActive('bold') ?? false,\n        canBold: ctx.editor.can().chain().toggleBold().run() ?? false,\n        isItalic: ctx.editor.isActive('italic') ?? false,\n        canItalic: ctx.editor.can().chain().toggleItalic().run() ?? false,\n        isStrike: ctx.editor.isActive('strike') ?? false,\n        canStrike: ctx.editor.can().chain().toggleStrike().run() ?? false,\n        isCode: ctx.editor.isActive('code') ?? false,\n        canCode: ctx.editor.can().chain().toggleCode().run() ?? false,\n        canClearMarks: ctx.editor.can().chain().unsetAllMarks().run() ?? false,\n        isParagraph: ctx.editor.isActive('paragraph') ?? false,\n        isHeading1: ctx.editor.isActive('heading', { level: 1 }) ?? false,\n        isHeading2: ctx.editor.isActive('heading', { level: 2 }) ?? false,\n        isHeading3: ctx.editor.isActive('heading', { level: 3 }) ?? false,\n        isHeading4: ctx.editor.isActive('heading', { level: 4 }) ?? false,\n        isHeading5: ctx.editor.isActive('heading', { level: 5 }) ?? false,\n        isHeading6: ctx.editor.isActive('heading', { level: 6 }) ?? false,\n        isBulletList: ctx.editor.isActive('bulletList') ?? false,\n        isOrderedList: ctx.editor.isActive('orderedList') ?? false,\n        isCodeBlock: ctx.editor.isActive('codeBlock') ?? false,\n        isBlockquote: ctx.editor.isActive('blockquote') ?? false,\n        canUndo: ctx.editor.can().chain().undo().run() ?? false,\n        canRedo: ctx.editor.can().chain().redo().run() ?? false,\n      }\n    },\n  })\n\n  const addImageFromUrl = useCallback(() => {\n    const url = window.prompt('Enter image URL:')\n\n    if (url) {\n      editor.chain().focus().setImage({ src: url }).run()\n    }\n  }, [editor])\n\n  const uploadImageToCloudinary = useCallback(async () => {\n    const input = document.createElement('input')\n    input.type = 'file'\n    input.accept = 'image/*'\n    \n    input.onchange = async (e: Event) => {\n      const file = (e.target as HTMLInputElement).files?.[0]\n      \n      if (!file) return\n\n      alert('Uploading image...')\n      \n      try {\n        const formData = new FormData()\n        formData.append('image', file)\n        \n        const response = await fetch(`${process.env.NEXT_PUBLIC_API_URL}/api/upload-image`, {\n          method: 'POST',\n          headers: {\n            'Authorization': `Bearer ${localStorage.getItem('auth_token')}`\n          },\n          body: formData\n        })\n        \n        const data = await response.json()\n        \n        if (response.ok && data.url) {\n          editor.chain().focus().setImage({ src: data.url }).run()\n        } else {\n          alert(data.message || 'Failed to upload image')\n        }\n      } catch (error) {\n        console.error('Upload failed:', error)\n        alert('Failed to upload image')\n      }\n    }\n    \n    input.click()\n  }, [editor])\n\n  return (\n    <div className=\"control-group\">\n      <div className=\"button-group\">\n        <button type=\"button\" onClick={() => editor.chain().focus().toggleBold().run()} disabled={!editorState.canBold} className={editorState.isBold ? 'is-active' : ''}>Bold</button>\n        <button type=\"button\" onClick={() => editor.chain().focus().toggleItalic().run()} disabled={!editorState.canItalic} className={editorState.isItalic ? 'is-active' : ''}>Italic</button>\n        <button type=\"button\" onClick={() => editor.chain().focus().toggleStrike().run()} disabled={!editorState.canStrike} className={editorState.isStrike ? 'is-active' : ''}>Strike</button>\n        <button type=\"button\" onClick={() => editor.chain().focus().toggleCode().run()} disabled={!editorState.canCode} className={editorState.isCode ? 'is-active' : ''}>Code</button>\n        <button type=\"button\" onClick={() => editor.chain().focus().unsetAllMarks().run()}>Clear marks</button>\n        <button type=\"button\" onClick={() => editor.chain().focus().clearNodes().run()}>Clear nodes</button>\n        <button type=\"button\" onClick={() => editor.chain().focus().setParagraph().run()} className={editorState.isParagraph ? 'is-active' : ''}>Paragraph</button>\n        <button type=\"button\" onClick={() => editor.chain().focus().toggleHeading({ level: 1 }).run()} className={editorState.isHeading1 ? 'is-active' : ''}>H1</button>\n        <button type=\"button\" onClick={() => editor.chain().focus().toggleHeading({ level: 2 }).run()} className={editorState.isHeading2 ? 'is-active' : ''}>H2</button>\n        <button type=\"button\" onClick={() => editor.chain().focus().toggleHeading({ level: 3 }).run()} className={editorState.isHeading3 ? 'is-active' : ''}>H3</button>\n        <button type=\"button\" onClick={() => editor.chain().focus().toggleHeading({ level: 4 }).run()} className={editorState.isHeading4 ? 'is-active' : ''}>H4</button>\n        <button type=\"button\" onClick={() => editor.chain().focus().toggleHeading({ level: 5 }).run()} className={editorState.isHeading5 ? 'is-active' : ''}>H5</button>\n        <button type=\"button\" onClick={() => editor.chain().focus().toggleHeading({ level: 6 }).run()} className={editorState.isHeading6 ? 'is-active' : ''}>H6</button>\n        <button type=\"button\" onClick={() => editor.chain().focus().toggleBulletList().run()} className={editorState.isBulletList ? 'is-active' : ''}>Bullet list</button>\n        <button type=\"button\" onClick={() => editor.chain().focus().toggleOrderedList().run()} className={editorState.isOrderedList ? 'is-active' : ''}>Ordered list</button>\n        <button type=\"button\" onClick={() => editor.chain().focus().toggleCodeBlock().run()} className={editorState.isCodeBlock ? 'is-active' : ''}>Code block</button>\n        <button type=\"button\" onClick={() => editor.chain().focus().toggleBlockquote().run()} className={editorState.isBlockquote ? 'is-active' : ''}>Blockquote</button>\n        <button type=\"button\" onClick={() => editor.chain().focus().setHorizontalRule().run()}>Horizontal rule</button>\n        <button type=\"button\" onClick={() => editor.chain().focus().setHardBreak().run()}>Hard break</button>\n        <button type=\"button\" onClick={addImageFromUrl}>Add image from URL</button>\n        <button type=\"button\" onClick={uploadImageToCloudinary}>Upload image</button>\n        <button type=\"button\" onClick={() => editor.chain().focus().undo().run()} disabled={!editorState.canUndo}>Undo</button>\n        <button type=\"button\" onClick={() => editor.chain().focus().redo().run()} disabled={!editorState.canRedo}>Redo</button>\n      </div>\n    </div>\n  )\n}\n\ninterface EditorNewProps {\n  value: string;\n  onChange: (value: string) => void;\n}\n\nexport default function EditorNew({ value, onChange }: EditorNewProps) {\n  const editor = useEditor({\n    extensions,\n    content: value,\n    immediatelyRender: false,\n    onUpdate: ({ editor }) => {\n      const html = editor.getHTML();\n      onChange(html);\n    },\n  })\n\n  // Update editor content when value prop changes from outside\n  useEffect(() => {\n    if (editor && value && value !== editor.getHTML()) {\n      editor.commands.setContent(value);\n    }\n  }, [value, editor]);\n\n  if (!editor) {\n    return null;\n  }\n\n  return (\n    <div className=\"editor-wrapper\">\n      <MenuBar editor={editor} />\n      <EditorContent editor={editor} />\n    </div>\n  )\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 561, "column": 0}, "map": {"version":3,"sources":["file:///Users/iqbalrizqi/Desktop/app/next/infra-competition-frontend/src/app/admin/posts/post/Form.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { PhotoIcon, ArrowLeftIcon } from \"@heroicons/react/24/outline\";\nimport Editor from \"../../components/MdEditor\";\nimport { api } from \"@/app/_components/lib/api\";\nimport EditorNew from \"../../components/EditorNew\";\n\ntype FormState = {\n  title: string;\n  short_body: string; // short_body\n  slug: string;\n  tags: string[]; // will be sent as comma separated string to Laravel\n  body: string; // body\n  thumbnail: File | null; // local file\n  status: \"draft\" | \"publish\";\n};\n\nexport default function CreatePostForm() {\n  const router = useRouter();\n\n  const [formData, setFormData] = useState<FormState>({\n    title: \"\",\n    short_body: \"\",\n    slug: \"\",\n    tags: [],\n    body: \"\",\n    thumbnail: null,\n    status: \"draft\",\n  });\n  const [previewImage, setPreviewImage] = useState<string | null>(null);\n  const [loading, setLoading] = useState(false);\n\n  const availableTags = [\n    \"OSIS\",\n    \"MPK\",\n    \"Akademik\",\n    \"Non-Akademik\",\n    \"Lomba\",\n    \"Workshop\",\n    \"Seminar\",\n    \"Ekstrakurikuler\",\n  ];\n\n  const handleInputChange = (\n    e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement>\n  ) => {\n    const { name, value } = e.target;\n    setFormData((prev) => ({ ...prev, [name]: value }));\n\n    if (name === \"title\") {\n      const slug = value\n        .toLowerCase()\n        .replace(/[^a-z0-9]+/g, \"-\")\n        .replace(/(^-|-$)/g, \"\");\n      setFormData((prev) => ({ ...prev, slug }));\n    }\n  };\n\n  const handleFileChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const files = event.target.files;\n    if (!files || files.length === 0) return;\n    const file = files[0];\n\n    // optional: basic client-side size check (2MB)\n    if (file.size > 2 * 1024 * 1024) {\n      alert(\"File terlalu besar. Maks 2MB.\");\n      return;\n    }\n\n    setFormData((prev) => ({ ...prev, thumbnail: file }));\n\n    const reader = new FileReader();\n    reader.onloadend = () => setPreviewImage(reader.result as string);\n    reader.readAsDataURL(file);\n  };\n\n  async function uploadToCloudinary(file: File) {\n    const cloudName = process.env.NEXT_PUBLIC_CLOUDINARY_CLOUD_NAME;\n    const uploadPreset = process.env.NEXT_PUBLIC_CLOUDINARY_UPLOAD_PRESET;\n    if (!cloudName || !uploadPreset) {\n      throw new Error(\"Cloudinary not configured. Set NEXT_PUBLIC_CLOUDINARY_* env vars.\");\n    }\n\n    const url = `https://api.cloudinary.com/v1_1/${cloudName}/image/upload`;\n    const fd = new FormData();\n    fd.append(\"file\", file);\n    fd.append(\"upload_preset\", uploadPreset);\n\n    const res = await fetch(url, { method: \"POST\", body: fd });\n    if (!res.ok) {\n      const text = await res.text();\n      throw new Error(`Cloudinary upload failed: ${text}`);\n    }\n    const data = await res.json();\n    return data.secure_url as string;\n  }\n\n  const handleTagToggle = (tag: string) => {\n    setFormData((prev) => ({\n      ...prev,\n      tags: prev.tags.includes(tag) ? prev.tags.filter((t) => t !== tag) : [...prev.tags, tag],\n    }));\n  };\n\n  const handleSubmit = async (e: React.FormEvent | null, publishStatus: \"draft\" | \"publish\" = \"draft\") => {\n    if (e) e.preventDefault();\n    setLoading(true);\n    try {\n      let thumbnailUrl: string | null = null;\n      if (formData.thumbnail) {\n        thumbnailUrl = await uploadToCloudinary(formData.thumbnail);\n      }\n\n      const payload = {\n        title: formData.title,\n        // author_id: backend should infer author from auth; omit if so\n        body: formData.body,\n        short_body: formData.short_body,\n        thumbnail: thumbnailUrl,\n        tags: formData.tags.join(\",\"),\n        slug: formData.slug,\n        is_published: publishStatus === \"publish\",\n        approval_status: \"pending\",\n      };\n\n      const res = await api.post(\"/blog\", payload);\n      if (!res.status.toString().startsWith(\"2\")) {\n        const text = await res.data();\n        throw new Error(`Create failed: ${text.message}`);\n      }\n\n      router.push(\"/admin/posts\");\n    } catch (err) {\n      console.error(err);\n      alert(\"Gagal membuat post. Cek console untuk detail.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"p-6\">\n      <div className=\"mx-auto max-w-4xl\">\n        <div className=\"mb-8\">\n          <button onClick={() => router.back()} className=\"flex items-center space-x-2 mb-4 text-gray-600 hover:text-gray-900\">\n            <ArrowLeftIcon className=\"w-5 h-5\" />\n            <span>Kembali</span>\n          </button>\n        </div>\n\n        <form onSubmit={(e) => handleSubmit(e, \"publish\")} className=\"space-y-6\">\n          <div className=\"space-y-6 bg-white shadow p-6 rounded-lg\">\n            <div>\n              <label className=\"block mb-2 font-medium text-gray-700 text-sm\">\n                Judul Post<span className=\"text-red-500\">*</span>\n              </label>\n              <input\n                name=\"title\"\n                value={formData.title}\n                onChange={handleInputChange}\n                placeholder=\"Masukkan judul post...\"\n                className=\"px-4 py-2 border border-gray-300 rounded-lg w-full\"\n                required\n              />\n            </div>\n\n            <div>\n              <label className=\"block mb-2 font-medium text-gray-700 text-sm\">\n                Deskripsi<span className=\"text-red-500\">*</span>\n              </label>\n              <textarea\n                name=\"short_body\"\n                value={formData.short_body}\n                onChange={handleInputChange}\n                placeholder=\"Deskripsi singkat tentang post...\"\n                rows={3}\n                className=\"px-4 py-2 border border-gray-300 rounded-lg w-full\"\n                required\n              />\n            </div>\n\n            <div>\n              <label className=\"block mb-2 font-medium text-gray-700 text-sm\">Custom Slug</label>\n              <input\n                name=\"slug\"\n                value={formData.slug}\n                onChange={handleInputChange}\n                placeholder=\"custom-url-slug\"\n                className=\"px-4 py-2 border border-gray-300 rounded-lg w-full\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block mb-2 font-medium text-gray-700 text-sm\">Tags</label>\n              <div className=\"flex flex-wrap gap-2\">\n                {availableTags.map((tag) => (\n                  <button\n                    key={tag}\n                    type=\"button\"\n                    onClick={() => handleTagToggle(tag)}\n                    className={`px-3 py-1 rounded-full text-sm font-medium ${\n                      formData.tags.includes(tag) ? \"bg-red-500 text-white\" : \"bg-gray-200 text-gray-700 hover:bg-gray-300\"\n                    }`}\n                  >\n                    {tag}\n                  </button>\n                ))}\n              </div>\n            </div>\n\n            <div>\n              <label className=\"block mb-2 font-medium text-gray-700 text-sm\">Thumbnail</label>\n              <div className=\"flex items-start space-x-4\">\n                <div className=\"flex justify-center items-center bg-gray-100 rounded-lg w-48 h-48 overflow-hidden\">\n                  {previewImage ? (\n                    // eslint-disable-next-line @next/next/no-img-element\n                    <img src={previewImage} alt=\"Preview\" className=\"w-full h-full object-cover\" />\n                  ) : (\n                    <PhotoIcon className=\"w-16 h-16 text-gray-400\" />\n                  )}\n                </div>\n\n                <div className=\"flex-1\">\n                  <input id=\"thumbnail-upload\" type=\"file\" accept=\"image/*\" onChange={handleFileChange} className=\"hidden\" />\n                  <label htmlFor=\"thumbnail-upload\" className=\"inline-flex items-center bg-white hover:bg-gray-50 px-4 py-2 border border-gray-300 rounded-lg font-medium text-gray-700 text-sm cursor-pointer\">\n                    Choose File\n                  </label>\n                  {formData.thumbnail && <p className=\"mt-2 text-gray-500 text-sm\">{formData.thumbnail.name}</p>}\n                  <p className=\"mt-2 text-gray-500 text-xs\">Recommended size: 1200x630px. Max file size: 2MB</p>\n                </div>\n              </div>\n            </div>\n\n            <div>\n              <label className=\"block mb-2 font-medium text-gray-700 text-sm\">\n                Text Editor<span className=\"text-red-500\">*</span>\n              </label>\n              <EditorNew value={formData.body} onChange={(content) => setFormData(prev => ({ ...prev, body: content }))} />\n            </div>\n\n            <div className=\"flex justify-end space-x-4 pt-6 border-t\">\n              <button type=\"button\" onClick={() => router.back()} className=\"hover:bg-gray-50 px-6 py-2 border border-gray-300 rounded-lg text-gray-700\">\n                Cancel\n              </button>\n              <button type=\"button\" onClick={() => handleSubmit(null, \"draft\")} className=\"bg-gray-500 hover:bg-gray-600 px-6 py-2 rounded-lg text-white\">\n                Save as Draft\n              </button>\n              <button type=\"submit\" disabled={loading} className=\"bg-red-500 hover:bg-red-600 px-6 py-2 rounded-lg text-white\">\n                {loading ? \"Menyimpan...\" : \"Simpan\"}\n              </button>\n            </div>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}}]
}