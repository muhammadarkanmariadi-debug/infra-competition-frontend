{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///D:/Project/infra-competition/fe/src/utils/database/atomics.ts"],"sourcesContent":["import { randomFillSync } from \"crypto\";\r\n\r\nexport function getMonthName(month: number) {\r\n  const months = [\r\n    \"Jan\",\r\n    \"Feb\",\r\n    \"Mar\",\r\n    \"Apr\",\r\n    \"May\",\r\n    \"Jun\",\r\n    \"Jul\",\r\n    \"Aug\",\r\n    \"Sep\",\r\n    \"Oct\",\r\n    \"Nov\",\r\n    \"Dec\",\r\n  ];\r\n\r\n  return months[month];\r\n}\r\n\r\nexport function stringifyDate(date: Date) {\r\n  const year = date.getFullYear(),\r\n    month = getMonthName(date.getMonth()),\r\n    day = date.getDate();\r\n  return `${month} ${day}, ${year}`;\r\n}\r\n// Endregion\r\n\r\nexport function stringifyCompleteDate(date: Date) {\r\n  const year = date.getFullYear(),\r\n    month = (\"0\" + (date.getMonth() + 1)).slice(-2),\r\n    day = (\"0\" + date.getDate()).slice(-2),\r\n    hour = (\"0\" + date.getHours()).slice(-2),\r\n    minute = (\"0\" + date.getMinutes()).slice(-2);\r\n  return `${year}/${month}/${day} at ${hour}:${minute}`;\r\n}\r\n\r\n//#region Pagination relateds\r\nexport function isInteger(value: string) {\r\n  return /^\\d+$/.test(value);\r\n}\r\n\r\nexport function validatePage(page: string) {\r\n  return isInteger(page) && parseInt(page) > 0;\r\n}\r\n//#endregion\r\n\r\nexport function generateRandomString(length: number): string {\r\n  const buffer = Buffer.alloc(length);\r\n  randomFillSync(buffer);\r\n\r\n  return buffer.toString(\"base64\").slice(0, length);\r\n}\r\n\r\nexport const formToJSON = (elements: HTMLElement) =>\r\n  [].reduce.call(\r\n    elements,\r\n    (data: any, element: HTMLInputElement) => {\r\n      data[element.name] =\r\n        element.type == \"checkbox\"\r\n          ? data[element.name]\r\n            ? element.checked\r\n              ? [...data[element.name], element.value]\r\n              : data[element.name].filter(\r\n                  (value: string) => value !== element.value,\r\n                )\r\n            : element.checked\r\n              ? [element.value]\r\n              : []\r\n          : element.type == \"radio\"\r\n            ? element.checked\r\n              ? element.value\r\n              : data[element.name]\r\n            : element.value;\r\n      return data;\r\n    },\r\n    {},\r\n  ) as Array<string | Array<string>>;\r\n\r\nexport const convertToDateTimeLocalString = (date: Date) => {\r\n  const year = date.getFullYear();\r\n  const month = (date.getMonth() + 1).toString().padStart(2, \"0\");\r\n  const day = date.getDate().toString().padStart(2, \"0\");\r\n  const hours = date.getHours().toString().padStart(2, \"0\");\r\n  const minutes = date.getMinutes().toString().padStart(2, \"0\");\r\n\r\n  return `${year}-${month}-${day}T${hours}:${minutes}`;\r\n};\r\n\r\nexport const countElements = (arr: any[]) => {\r\n  const uniqueElements = Array.from(new Set(arr));\r\n  const counts = uniqueElements.map((element) => ({\r\n    value: element,\r\n    count: arr.filter((item) => item === element).length,\r\n  }));\r\n\r\n  return counts;\r\n};\r\n\r\nexport const transformToArrayCheckbox = (inputArray: Array<any>) => {\r\n  return inputArray.reduce((acc, { field_id, value }) => {\r\n    const group = acc.find(\r\n      (group: { field_id: string }) => group.field_id === field_id,\r\n    );\r\n\r\n    if (group) {\r\n      group.value = Array.isArray(group.value)\r\n        ? group.value.concat(value)\r\n        : [group.value, value];\r\n    } else {\r\n      acc.push({ field_id, value });\r\n    }\r\n    return acc;\r\n  }, []);\r\n};\r\n\r\nexport function arrayMove<T>(\r\n  arr: T[],\r\n  oldIndex: number,\r\n  newIndex: number,\r\n): T[] {\r\n  if (newIndex >= arr.length) {\r\n    let k = newIndex - arr.length + 1;\r\n    while (k--) {\r\n      arr.push(undefined as unknown as T);\r\n    }\r\n  }\r\n  arr.splice(newIndex, 0, arr.splice(oldIndex, 1)[0]);\r\n  return arr; // for testing\r\n}\r\n\r\nexport function slugify(str: string, separator = \"-\") {\r\n  str = str.replace(/^\\s+|\\s+$/g, \"\"); // trim leading/trailing white space\r\n  str = str.toLowerCase(); // convert string to lowercase\r\n  str = str\r\n    .replace(/[^a-z0-9 -]/g, \"\") // remove any non-alphanumeric characters\r\n    .replace(/\\s+/g, separator) // replace spaces with hyphens\r\n    .replace(/-+/g, separator); // remove consecutive hyphens\r\n  return str;\r\n}\r\n\r\n// file size converter\r\nexport function fileSizeToMb(fileSize: number) {\r\n  return parseFloat((fileSize / (1024 * 1024)).toFixed(2));\r\n}\r\n//#endregion\r\n\r\nexport function trimName(name: string) {\r\n  const splitName = name.split(\" \");\r\n  const trimmedName = splitName[0] + \" \" + splitName[1];\r\n  return trimmedName;\r\n}\r\n\r\nexport function getDateMonths(date: Date, months: number) {\r\n  date.setMonth(date.getMonth() + months);\r\n  return date;\r\n}\r\n\r\nexport function getDateDaysAgoMore(date: Date, days: number) {\r\n  date.setDate(date.getDate() + days);\r\n  return date;\r\n}\r\n\r\nexport const stripMarkdown = (markdown: string) => {\r\n  return markdown\r\n    .replace(/!\\[.*?\\]\\(.*?\\)/g, \"\")\r\n    .replace(/\\[([^\\]]+)\\]\\(.*?\\)/g, \"$1\")\r\n    .replace(/`{3}.*\\n?/g, \"\")\r\n    .replace(/`(.+?)`/g, \"$1\")\r\n    .replace(/[*_~`#>-]/g, \"\")\r\n    .replace(/\\n+/g, \" \")\r\n    .trim();\r\n};\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 153, "column": 0}, "map": {"version":3,"sources":["file:///D:/Project/infra-competition/fe/src/app/admin/components/MdEditor.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { fileSizeToMb } from \"@/utils/database/atomics\";\r\nimport MDEditor, {\r\n  commands,\r\n  bold,\r\n  italic,\r\n  strikethrough,\r\n  title,\r\n  divider,\r\n  link,\r\n  quote,\r\n  code,\r\n  hr,\r\n  codeBlock,\r\n  comment,\r\n  table,\r\n  unorderedListCommand,\r\n  orderedListCommand,\r\n  checkedListCommand,\r\n  TextAreaTextApi,\r\n} from \"@uiw/react-md-editor\";\r\nimport { ChangeEvent, useRef } from \"react\";\r\nimport { FaFileImage } from \"react-icons/fa\";\r\nimport { toast } from \"sonner\";\r\n\r\nexport default function Editor({\r\n  value,\r\n  onChange,\r\n  label,\r\n}: {\r\n  value: string;\r\n  onChange: (\r\n    value?: string | undefined,\r\n    event?: ChangeEvent<HTMLTextAreaElement> | undefined,\r\n  ) => void;\r\n  label?: string;\r\n}) {\r\n  const insertImageRef = useRef<HTMLInputElement>(null);\r\n\r\n  const insertImage: commands.ICommand = {\r\n    name: \"Insert image\",\r\n    keyCommand: \"Insert upload\",\r\n    buttonProps: { \"aria-label\": \"Insert an image\" },\r\n    icon: <FaFileImage />,\r\n    execute: async (_, api: TextAreaTextApi) => {\r\n      const file = await getImage();\r\n      if (!file) return toast.error(\"Gagal memilih gambar\");\r\n\r\n      const imageSizeInMb = fileSizeToMb(file.size);\r\n      if (imageSizeInMb >= 4.3)\r\n        return toast.error(\"Ukuran file terlalu besar! Maksimal 4.3 MB\");\r\n\r\n      try {\r\n        const toastId = toast.loading(\"Mengunggah gambar ke Cloudinary...\");\r\n\r\n        // 🔧 Ganti dengan milik kamu\r\n        const CLOUD_NAME = process.env.NEXT_PUBLIC_CLOUDINARY_CLOUD_NAME!;\r\n        const UPLOAD_PRESET = process.env.NEXT_PUBLIC_CLOUDINARY_UPLOAD_PRESET!;\r\n\r\n        const formData = new FormData();\r\n        formData.append(\"file\", file);\r\n        formData.append(\"upload_preset\", UPLOAD_PRESET);\r\n\r\n        const res = await fetch(\r\n          `https://api.cloudinary.com/v1_1/${CLOUD_NAME}/image/upload`,\r\n          {\r\n            method: \"POST\",\r\n            body: formData,\r\n          }\r\n        );\r\n\r\n        const data = await res.json();\r\n\r\n        if (!res.ok || !data.secure_url) {\r\n          throw new Error(data.error?.message || \"Upload gagal\");\r\n        }\r\n\r\n        const imageUrl = data.secure_url;\r\n        const markdownImage = `![uploaded image](${imageUrl})\\n`;\r\n\r\n        api.replaceSelection(markdownImage);\r\n        toast.success(\"Gambar berhasil diunggah!\", { id: toastId });\r\n      } catch (error: any) {\r\n        console.error(error);\r\n        toast.error(\"Gagal mengunggah gambar\");\r\n      } finally {\r\n        if (insertImageRef.current) insertImageRef.current.value = \"\";\r\n      }\r\n    },\r\n  };\r\n\r\n  function getImage(): Promise<File | null> {\r\n    return new Promise((resolve, reject) => {\r\n      if (!insertImageRef.current) return resolve(null);\r\n\r\n      insertImageRef.current.onchange = () => {\r\n        try {\r\n          if (!confirm(\"Upload gambar ini?\")) {\r\n            insertImageRef.current!.value = \"\";\r\n            return;\r\n          }\r\n          resolve(insertImageRef.current!.files?.[0] || null);\r\n        } catch (e) {\r\n          reject(e);\r\n        }\r\n      };\r\n      insertImageRef.current.click();\r\n    });\r\n  }\r\n\r\n  const toolbarCommands = [\r\n    bold,\r\n    italic,\r\n    strikethrough,\r\n    hr,\r\n    title,\r\n    divider,\r\n    link,\r\n    quote,\r\n    code,\r\n    codeBlock,\r\n    comment,\r\n    insertImage,\r\n    table,\r\n    divider,\r\n    unorderedListCommand,\r\n    orderedListCommand,\r\n    checkedListCommand,\r\n  ];\r\n\r\n  return (\r\n    <div data-color-mode=\"light\">\r\n      <label htmlFor=\"textEditor\">{label ?? \"Text Editor\"}</label>\r\n      <input\r\n        type=\"file\"\r\n        hidden\r\n        name=\"insertImage\"\r\n        ref={insertImageRef}\r\n        accept=\"image/gif,image/jpeg,image/jpg,image/png,image/webp,image/svg\"\r\n      />\r\n      <MDEditor\r\n        value={value}\r\n        onChange={onChange}\r\n        className=\"[&>div.w-md-editor-content>div.w-md-editor-preview]:prose\"\r\n        height={600}\r\n        style={{\r\n          backgroundColor: \"#fff\",\r\n          color: \"#000\",\r\n          fontFamily: \"inherit\",\r\n          padding: 0,\r\n        }}\r\n        id=\"textEditor\"\r\n        commands={toolbarCommands}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 329, "column": 0}, "map": {"version":3,"sources":["file:///D:/Project/infra-competition/fe/src/app/admin/posts/post/Form.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { PhotoIcon, ArrowLeftIcon } from \"@heroicons/react/24/outline\";\r\nimport Editor from \"../../components/MdEditor\";\r\nimport { api } from \"@/app/_components/lib/api\";\r\n\r\ntype FormState = {\r\n  title: string;\r\n  short_body: string; // short_body\r\n  slug: string;\r\n  tags: string[]; // will be sent as comma separated string to Laravel\r\n  body: string; // body\r\n  thumbnail: File | null; // local file\r\n  status: \"draft\" | \"publish\";\r\n};\r\n\r\nexport default function CreatePostForm() {\r\n  const router = useRouter();\r\n\r\n  const [formData, setFormData] = useState<FormState>({\r\n    title: \"\",\r\n    short_body: \"\",\r\n    slug: \"\",\r\n    tags: [],\r\n    body: \"\",\r\n    thumbnail: null,\r\n    status: \"draft\",\r\n  });\r\n  const [previewImage, setPreviewImage] = useState<string | null>(null);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const availableTags = [\r\n    \"OSIS\",\r\n    \"MPK\",\r\n    \"Akademik\",\r\n    \"Non-Akademik\",\r\n    \"Lomba\",\r\n    \"Workshop\",\r\n    \"Seminar\",\r\n    \"Ekstrakurikuler\",\r\n  ];\r\n\r\n  const handleInputChange = (\r\n    e: React.ChangeEvent<HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement>\r\n  ) => {\r\n    const { name, value } = e.target;\r\n    setFormData((prev) => ({ ...prev, [name]: value }));\r\n\r\n    if (name === \"title\") {\r\n      const slug = value\r\n        .toLowerCase()\r\n        .replace(/[^a-z0-9]+/g, \"-\")\r\n        .replace(/(^-|-$)/g, \"\");\r\n      setFormData((prev) => ({ ...prev, slug }));\r\n    }\r\n  };\r\n\r\n  const handleFileChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    const files = event.target.files;\r\n    if (!files || files.length === 0) return;\r\n    const file = files[0];\r\n\r\n    // optional: basic client-side size check (2MB)\r\n    if (file.size > 2 * 1024 * 1024) {\r\n      alert(\"File terlalu besar. Maks 2MB.\");\r\n      return;\r\n    }\r\n\r\n    setFormData((prev) => ({ ...prev, thumbnail: file }));\r\n\r\n    const reader = new FileReader();\r\n    reader.onloadend = () => setPreviewImage(reader.result as string);\r\n    reader.readAsDataURL(file);\r\n  };\r\n\r\n  async function uploadToCloudinary(file: File) {\r\n    const cloudName = process.env.NEXT_PUBLIC_CLOUDINARY_CLOUD_NAME;\r\n    const uploadPreset = process.env.NEXT_PUBLIC_CLOUDINARY_UPLOAD_PRESET;\r\n    if (!cloudName || !uploadPreset) {\r\n      throw new Error(\"Cloudinary not configured. Set NEXT_PUBLIC_CLOUDINARY_* env vars.\");\r\n    }\r\n\r\n    const url = `https://api.cloudinary.com/v1_1/${cloudName}/image/upload`;\r\n    const fd = new FormData();\r\n    fd.append(\"file\", file);\r\n    fd.append(\"upload_preset\", uploadPreset);\r\n\r\n    const res = await fetch(url, { method: \"POST\", body: fd });\r\n    if (!res.ok) {\r\n      const text = await res.text();\r\n      throw new Error(`Cloudinary upload failed: ${text}`);\r\n    }\r\n    const data = await res.json();\r\n    return data.secure_url as string;\r\n  }\r\n\r\n  const handleTagToggle = (tag: string) => {\r\n    setFormData((prev) => ({\r\n      ...prev,\r\n      tags: prev.tags.includes(tag) ? prev.tags.filter((t) => t !== tag) : [...prev.tags, tag],\r\n    }));\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent | null, publishStatus: \"draft\" | \"publish\" = \"draft\") => {\r\n    if (e) e.preventDefault();\r\n    setLoading(true);\r\n    try {\r\n      let thumbnailUrl: string | null = null;\r\n      if (formData.thumbnail) {\r\n        thumbnailUrl = await uploadToCloudinary(formData.thumbnail);\r\n      }\r\n\r\n      const payload = {\r\n        title: formData.title,\r\n        // author_id: backend should infer author from auth; omit if so\r\n        body: formData.body,\r\n        short_body: formData.short_body,\r\n        thumbnail: thumbnailUrl,\r\n        tags: formData.tags.join(\",\"),\r\n        slug: formData.slug,\r\n        is_published: publishStatus === \"publish\",\r\n        approval_status: \"pending\",\r\n      };\r\n\r\n      const res = await api.post(\"/blog\", JSON.stringify(payload));\r\n      if (!res.status.toString().startsWith(\"2\")) {\r\n        const text = await res.data();\r\n        throw new Error(`Create failed: ${text.message}`);\r\n      }\r\n\r\n      router.push(\"/admin/posts\");\r\n    } catch (err) {\r\n      console.error(err);\r\n      alert(\"Gagal membuat post. Cek console untuk detail.\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-6\">\r\n      <div className=\"mx-auto max-w-4xl\">\r\n        <div className=\"mb-8\">\r\n          <button onClick={() => router.back()} className=\"flex items-center space-x-2 mb-4 text-gray-600 hover:text-gray-900\">\r\n            <ArrowLeftIcon className=\"w-5 h-5\" />\r\n            <span>Kembali</span>\r\n          </button>\r\n        </div>\r\n\r\n        <form onSubmit={(e) => handleSubmit(e, \"publish\")} className=\"space-y-6\">\r\n          <div className=\"space-y-6 bg-white shadow p-6 rounded-lg\">\r\n            <div>\r\n              <label className=\"block mb-2 font-medium text-gray-700 text-sm\">\r\n                Judul Post<span className=\"text-red-500\">*</span>\r\n              </label>\r\n              <input\r\n                name=\"title\"\r\n                value={formData.title}\r\n                onChange={handleInputChange}\r\n                placeholder=\"Masukkan judul post...\"\r\n                className=\"px-4 py-2 border border-gray-300 rounded-lg w-full\"\r\n                required\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block mb-2 font-medium text-gray-700 text-sm\">\r\n                Deskripsi<span className=\"text-red-500\">*</span>\r\n              </label>\r\n              <textarea\r\n                name=\"short_body\"\r\n                value={formData.short_body}\r\n                onChange={handleInputChange}\r\n                placeholder=\"Deskripsi singkat tentang post...\"\r\n                rows={3}\r\n                className=\"px-4 py-2 border border-gray-300 rounded-lg w-full\"\r\n                required\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block mb-2 font-medium text-gray-700 text-sm\">Custom Slug</label>\r\n              <input\r\n                name=\"slug\"\r\n                value={formData.slug}\r\n                onChange={handleInputChange}\r\n                placeholder=\"custom-url-slug\"\r\n                className=\"px-4 py-2 border border-gray-300 rounded-lg w-full\"\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block mb-2 font-medium text-gray-700 text-sm\">Tags</label>\r\n              <div className=\"flex flex-wrap gap-2\">\r\n                {availableTags.map((tag) => (\r\n                  <button\r\n                    key={tag}\r\n                    type=\"button\"\r\n                    onClick={() => handleTagToggle(tag)}\r\n                    className={`px-3 py-1 rounded-full text-sm font-medium ${\r\n                      formData.tags.includes(tag) ? \"bg-red-500 text-white\" : \"bg-gray-200 text-gray-700 hover:bg-gray-300\"\r\n                    }`}\r\n                  >\r\n                    {tag}\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block mb-2 font-medium text-gray-700 text-sm\">Thumbnail</label>\r\n              <div className=\"flex items-start space-x-4\">\r\n                <div className=\"flex justify-center items-center bg-gray-100 rounded-lg w-48 h-48 overflow-hidden\">\r\n                  {previewImage ? (\r\n                    // eslint-disable-next-line @next/next/no-img-element\r\n                    <img src={previewImage} alt=\"Preview\" className=\"w-full h-full object-cover\" />\r\n                  ) : (\r\n                    <PhotoIcon className=\"w-16 h-16 text-gray-400\" />\r\n                  )}\r\n                </div>\r\n\r\n                <div className=\"flex-1\">\r\n                  <input id=\"thumbnail-upload\" type=\"file\" accept=\"image/*\" onChange={handleFileChange} className=\"hidden\" />\r\n                  <label htmlFor=\"thumbnail-upload\" className=\"inline-flex items-center bg-white hover:bg-gray-50 px-4 py-2 border border-gray-300 rounded-lg font-medium text-gray-700 text-sm cursor-pointer\">\r\n                    Choose File\r\n                  </label>\r\n                  {formData.thumbnail && <p className=\"mt-2 text-gray-500 text-sm\">{formData.thumbnail.name}</p>}\r\n                  <p className=\"mt-2 text-gray-500 text-xs\">Recommended size: 1200x630px. Max file size: 2MB</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div>\r\n              <label className=\"block mb-2 font-medium text-gray-700 text-sm\">\r\n                Text Editor<span className=\"text-red-500\">*</span>\r\n              </label>\r\n              <Editor value={formData.body} onChange={(value?: string) => setFormData((prev) => ({ ...prev, body: value ?? \"\" }))} />\r\n            </div>\r\n\r\n            <div className=\"flex justify-end space-x-4 pt-6 border-t\">\r\n              <button type=\"button\" onClick={() => router.back()} className=\"hover:bg-gray-50 px-6 py-2 border border-gray-300 rounded-lg text-gray-700\">\r\n                Cancel\r\n              </button>\r\n              <button type=\"button\" onClick={() => handleSubmit(null, \"draft\")} className=\"bg-gray-500 hover:bg-gray-600 px-6 py-2 rounded-lg text-white\">\r\n                Save as Draft\r\n              </button>\r\n              <button type=\"submit\" disabled={loading} className=\"bg-red-500 hover:bg-red-600 px-6 py-2 rounded-lg text-white\">\r\n                {loading ? \"Menyimpan...\" : \"Simpan\"}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}