{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Coding/Moklet%20Portal%201/infra-competition-frontend/src/utils/database/atomics.ts"],"sourcesContent":["import { randomFillSync } from \"crypto\";\r\n\r\nexport function getMonthName(month: number) {\r\n  const months = [\r\n    \"Jan\",\r\n    \"Feb\",\r\n    \"Mar\",\r\n    \"Apr\",\r\n    \"May\",\r\n    \"Jun\",\r\n    \"Jul\",\r\n    \"Aug\",\r\n    \"Sep\",\r\n    \"Oct\",\r\n    \"Nov\",\r\n    \"Dec\",\r\n  ];\r\n\r\n  return months[month];\r\n}\r\n\r\nexport function stringifyDate(date: Date) {\r\n  const year = date.getFullYear(),\r\n    month = getMonthName(date.getMonth()),\r\n    day = date.getDate();\r\n  return `${month} ${day}, ${year}`;\r\n}\r\n// Endregion\r\n\r\nexport function stringifyCompleteDate(date: Date) {\r\n  const year = date.getFullYear(),\r\n    month = (\"0\" + (date.getMonth() + 1)).slice(-2),\r\n    day = (\"0\" + date.getDate()).slice(-2),\r\n    hour = (\"0\" + date.getHours()).slice(-2),\r\n    minute = (\"0\" + date.getMinutes()).slice(-2);\r\n  return `${year}/${month}/${day} at ${hour}:${minute}`;\r\n}\r\n\r\n//#region Pagination relateds\r\nexport function isInteger(value: string) {\r\n  return /^\\d+$/.test(value);\r\n}\r\n\r\nexport function validatePage(page: string) {\r\n  return isInteger(page) && parseInt(page) > 0;\r\n}\r\n//#endregion\r\n\r\nexport function generateRandomString(length: number): string {\r\n  const buffer = Buffer.alloc(length);\r\n  randomFillSync(buffer);\r\n\r\n  return buffer.toString(\"base64\").slice(0, length);\r\n}\r\n\r\nexport const formToJSON = (elements: HTMLElement) =>\r\n  [].reduce.call(\r\n    elements,\r\n    (data: any, element: HTMLInputElement) => {\r\n      data[element.name] =\r\n        element.type == \"checkbox\"\r\n          ? data[element.name]\r\n            ? element.checked\r\n              ? [...data[element.name], element.value]\r\n              : data[element.name].filter(\r\n                  (value: string) => value !== element.value,\r\n                )\r\n            : element.checked\r\n              ? [element.value]\r\n              : []\r\n          : element.type == \"radio\"\r\n            ? element.checked\r\n              ? element.value\r\n              : data[element.name]\r\n            : element.value;\r\n      return data;\r\n    },\r\n    {},\r\n  ) as Array<string | Array<string>>;\r\n\r\nexport const convertToDateTimeLocalString = (date: Date) => {\r\n  const year = date.getFullYear();\r\n  const month = (date.getMonth() + 1).toString().padStart(2, \"0\");\r\n  const day = date.getDate().toString().padStart(2, \"0\");\r\n  const hours = date.getHours().toString().padStart(2, \"0\");\r\n  const minutes = date.getMinutes().toString().padStart(2, \"0\");\r\n\r\n  return `${year}-${month}-${day}T${hours}:${minutes}`;\r\n};\r\n\r\nexport const countElements = (arr: any[]) => {\r\n  const uniqueElements = Array.from(new Set(arr));\r\n  const counts = uniqueElements.map((element) => ({\r\n    value: element,\r\n    count: arr.filter((item) => item === element).length,\r\n  }));\r\n\r\n  return counts;\r\n};\r\n\r\nexport const transformToArrayCheckbox = (inputArray: Array<any>) => {\r\n  return inputArray.reduce((acc, { field_id, value }) => {\r\n    const group = acc.find(\r\n      (group: { field_id: string }) => group.field_id === field_id,\r\n    );\r\n\r\n    if (group) {\r\n      group.value = Array.isArray(group.value)\r\n        ? group.value.concat(value)\r\n        : [group.value, value];\r\n    } else {\r\n      acc.push({ field_id, value });\r\n    }\r\n    return acc;\r\n  }, []);\r\n};\r\n\r\nexport function arrayMove<T>(\r\n  arr: T[],\r\n  oldIndex: number,\r\n  newIndex: number,\r\n): T[] {\r\n  if (newIndex >= arr.length) {\r\n    let k = newIndex - arr.length + 1;\r\n    while (k--) {\r\n      arr.push(undefined as unknown as T);\r\n    }\r\n  }\r\n  arr.splice(newIndex, 0, arr.splice(oldIndex, 1)[0]);\r\n  return arr; // for testing\r\n}\r\n\r\nexport function slugify(str: string, separator = \"-\") {\r\n  str = str.replace(/^\\s+|\\s+$/g, \"\"); // trim leading/trailing white space\r\n  str = str.toLowerCase(); // convert string to lowercase\r\n  str = str\r\n    .replace(/[^a-z0-9 -]/g, \"\") // remove any non-alphanumeric characters\r\n    .replace(/\\s+/g, separator) // replace spaces with hyphens\r\n    .replace(/-+/g, separator); // remove consecutive hyphens\r\n  return str;\r\n}\r\n\r\n// file size converter\r\nexport function fileSizeToMb(fileSize: number) {\r\n  return parseFloat((fileSize / (1024 * 1024)).toFixed(2));\r\n}\r\n//#endregion\r\n\r\nexport function trimName(name: string) {\r\n  const splitName = name.split(\" \");\r\n  const trimmedName = splitName[0] + \" \" + splitName[1];\r\n  return trimmedName;\r\n}\r\n\r\nexport function getDateMonths(date: Date, months: number) {\r\n  date.setMonth(date.getMonth() + months);\r\n  return date;\r\n}\r\n\r\nexport function getDateDaysAgoMore(date: Date, days: number) {\r\n  date.setDate(date.getDate() + days);\r\n  return date;\r\n}\r\n\r\nexport const stripMarkdown = (markdown: string) => {\r\n  return markdown\r\n    .replace(/!\\[.*?\\]\\(.*?\\)/g, \"\")\r\n    .replace(/\\[([^\\]]+)\\]\\(.*?\\)/g, \"$1\")\r\n    .replace(/`{3}.*\\n?/g, \"\")\r\n    .replace(/`(.+?)`/g, \"$1\")\r\n    .replace(/[*_~`#>-]/g, \"\")\r\n    .replace(/\\n+/g, \" \")\r\n    .trim();\r\n};\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAiDiB;AAjDjB;;AAEO,SAAS,aAAa,KAAa;IACxC,MAAM,SAAS;QACb;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IAED,OAAO,MAAM,CAAC,MAAM;AACtB;AAEO,SAAS,cAAc,IAAU;IACtC,MAAM,OAAO,KAAK,WAAW,IAC3B,QAAQ,aAAa,KAAK,QAAQ,KAClC,MAAM,KAAK,OAAO;IACpB,OAAO,GAAG,MAAM,CAAC,EAAE,IAAI,EAAE,EAAE,MAAM;AACnC;AAGO,SAAS,sBAAsB,IAAU;IAC9C,MAAM,OAAO,KAAK,WAAW,IAC3B,QAAQ,CAAC,MAAM,CAAC,KAAK,QAAQ,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,IAC7C,MAAM,CAAC,MAAM,KAAK,OAAO,EAAE,EAAE,KAAK,CAAC,CAAC,IACpC,OAAO,CAAC,MAAM,KAAK,QAAQ,EAAE,EAAE,KAAK,CAAC,CAAC,IACtC,SAAS,CAAC,MAAM,KAAK,UAAU,EAAE,EAAE,KAAK,CAAC,CAAC;IAC5C,OAAO,GAAG,KAAK,CAAC,EAAE,MAAM,CAAC,EAAE,IAAI,IAAI,EAAE,KAAK,CAAC,EAAE,QAAQ;AACvD;AAGO,SAAS,UAAU,KAAa;IACrC,OAAO,QAAQ,IAAI,CAAC;AACtB;AAEO,SAAS,aAAa,IAAY;IACvC,OAAO,UAAU,SAAS,SAAS,QAAQ;AAC7C;AAGO,SAAS,qBAAqB,MAAc;IACjD,MAAM,SAAS,8JAAA,CAAA,SAAM,CAAC,KAAK,CAAC;IAC5B,CAAA,GAAA,4KAAA,CAAA,iBAAc,AAAD,EAAE;IAEf,OAAO,OAAO,QAAQ,CAAC,UAAU,KAAK,CAAC,GAAG;AAC5C;AAEO,MAAM,aAAa,CAAC,WACzB,EAAE,CAAC,MAAM,CAAC,IAAI,CACZ,UACA,CAAC,MAAW;QACV,IAAI,CAAC,QAAQ,IAAI,CAAC,GAChB,QAAQ,IAAI,IAAI,aACZ,IAAI,CAAC,QAAQ,IAAI,CAAC,GAChB,QAAQ,OAAO,GACb;eAAI,IAAI,CAAC,QAAQ,IAAI,CAAC;YAAE,QAAQ,KAAK;SAAC,GACtC,IAAI,CAAC,QAAQ,IAAI,CAAC,CAAC,MAAM,CACvB,CAAC,QAAkB,UAAU,QAAQ,KAAK,IAE9C,QAAQ,OAAO,GACb;YAAC,QAAQ,KAAK;SAAC,GACf,EAAE,GACN,QAAQ,IAAI,IAAI,UACd,QAAQ,OAAO,GACb,QAAQ,KAAK,GACb,IAAI,CAAC,QAAQ,IAAI,CAAC,GACpB,QAAQ,KAAK;QACrB,OAAO;IACT,GACA,CAAC;AAGE,MAAM,+BAA+B,CAAC;IAC3C,MAAM,OAAO,KAAK,WAAW;IAC7B,MAAM,QAAQ,CAAC,KAAK,QAAQ,KAAK,CAAC,EAAE,QAAQ,GAAG,QAAQ,CAAC,GAAG;IAC3D,MAAM,MAAM,KAAK,OAAO,GAAG,QAAQ,GAAG,QAAQ,CAAC,GAAG;IAClD,MAAM,QAAQ,KAAK,QAAQ,GAAG,QAAQ,GAAG,QAAQ,CAAC,GAAG;IACrD,MAAM,UAAU,KAAK,UAAU,GAAG,QAAQ,GAAG,QAAQ,CAAC,GAAG;IAEzD,OAAO,GAAG,KAAK,CAAC,EAAE,MAAM,CAAC,EAAE,IAAI,CAAC,EAAE,MAAM,CAAC,EAAE,SAAS;AACtD;AAEO,MAAM,gBAAgB,CAAC;IAC5B,MAAM,iBAAiB,MAAM,IAAI,CAAC,IAAI,IAAI;IAC1C,MAAM,SAAS,eAAe,GAAG,CAAC,CAAC,UAAY,CAAC;YAC9C,OAAO;YACP,OAAO,IAAI,MAAM,CAAC,CAAC,OAAS,SAAS,SAAS,MAAM;QACtD,CAAC;IAED,OAAO;AACT;AAEO,MAAM,2BAA2B,CAAC;IACvC,OAAO,WAAW,MAAM,CAAC,CAAC,KAAK,EAAE,QAAQ,EAAE,KAAK,EAAE;QAChD,MAAM,QAAQ,IAAI,IAAI,CACpB,CAAC,QAAgC,MAAM,QAAQ,KAAK;QAGtD,IAAI,OAAO;YACT,MAAM,KAAK,GAAG,MAAM,OAAO,CAAC,MAAM,KAAK,IACnC,MAAM,KAAK,CAAC,MAAM,CAAC,SACnB;gBAAC,MAAM,KAAK;gBAAE;aAAM;QAC1B,OAAO;YACL,IAAI,IAAI,CAAC;gBAAE;gBAAU;YAAM;QAC7B;QACA,OAAO;IACT,GAAG,EAAE;AACP;AAEO,SAAS,UACd,GAAQ,EACR,QAAgB,EAChB,QAAgB;IAEhB,IAAI,YAAY,IAAI,MAAM,EAAE;QAC1B,IAAI,IAAI,WAAW,IAAI,MAAM,GAAG;QAChC,MAAO,IAAK;YACV,IAAI,IAAI,CAAC;QACX;IACF;IACA,IAAI,MAAM,CAAC,UAAU,GAAG,IAAI,MAAM,CAAC,UAAU,EAAE,CAAC,EAAE;IAClD,OAAO,KAAK,cAAc;AAC5B;AAEO,SAAS,QAAQ,GAAW,EAAE,YAAY,GAAG;IAClD,MAAM,IAAI,OAAO,CAAC,cAAc,KAAK,oCAAoC;IACzE,MAAM,IAAI,WAAW,IAAI,8BAA8B;IACvD,MAAM,IACH,OAAO,CAAC,gBAAgB,IAAI,yCAAyC;KACrE,OAAO,CAAC,QAAQ,WAAW,8BAA8B;KACzD,OAAO,CAAC,OAAO,YAAY,6BAA6B;IAC3D,OAAO;AACT;AAGO,SAAS,aAAa,QAAgB;IAC3C,OAAO,WAAW,CAAC,WAAW,CAAC,OAAO,IAAI,CAAC,EAAE,OAAO,CAAC;AACvD;AAGO,SAAS,SAAS,IAAY;IACnC,MAAM,YAAY,KAAK,KAAK,CAAC;IAC7B,MAAM,cAAc,SAAS,CAAC,EAAE,GAAG,MAAM,SAAS,CAAC,EAAE;IACrD,OAAO;AACT;AAEO,SAAS,cAAc,IAAU,EAAE,MAAc;IACtD,KAAK,QAAQ,CAAC,KAAK,QAAQ,KAAK;IAChC,OAAO;AACT;AAEO,SAAS,mBAAmB,IAAU,EAAE,IAAY;IACzD,KAAK,OAAO,CAAC,KAAK,OAAO,KAAK;IAC9B,OAAO;AACT;AAEO,MAAM,gBAAgB,CAAC;IAC5B,OAAO,SACJ,OAAO,CAAC,oBAAoB,IAC5B,OAAO,CAAC,wBAAwB,MAChC,OAAO,CAAC,cAAc,IACtB,OAAO,CAAC,YAAY,MACpB,OAAO,CAAC,cAAc,IACtB,OAAO,CAAC,QAAQ,KAChB,IAAI;AACT","debugId":null}},
    {"offset": {"line": 153, "column": 0}, "map": {"version":3,"sources":["file:///C:/Coding/Moklet%20Portal%201/infra-competition-frontend/src/app/admin/components/MdEditor.tsx"],"sourcesContent":["\r\n\"use client\";\r\n\r\nimport { fileSizeToMb } from \"@/utils/database/atomics\";\r\nimport MDEditor, {\r\n  commands,\r\n  bold,\r\n  italic,\r\n  strikethrough,\r\n  title,\r\n  divider,\r\n  link,\r\n  quote,\r\n  code,\r\n  hr,\r\n  codeBlock,\r\n  comment,\r\n  table,\r\n  unorderedListCommand,\r\n  orderedListCommand,\r\n  checkedListCommand,\r\n  TextAreaTextApi,\r\n} from \"@uiw/react-md-editor\";\r\nimport { ChangeEvent, useRef } from \"react\";\r\nimport { FaFileImage } from \"react-icons/fa\";\r\nimport { toast } from \"sonner\";\r\n\r\nexport default function Editor({\r\n  value,\r\n  onChange,\r\n  label,\r\n  hostType = \"CLOUDINARY\",\r\n}: {\r\n  value: string;\r\n  onChange: (\r\n    value?: string | undefined,\r\n    event?: ChangeEvent<HTMLTextAreaElement> | undefined,\r\n  ) => void;\r\n  label?: string;\r\n  hostType?: \"CLOUDINARY\" | \"IMGBB\";\r\n}) {\r\n  const insertImageRef = useRef<HTMLInputElement>(null);\r\n\r\n  const insertImage: commands.ICommand = {\r\n    name: \"Insert image\",\r\n    keyCommand: \"Insert upload\",\r\n    buttonProps: { \"aria-label\": \"Insert an image\" },\r\n    icon: <FaFileImage />,\r\n    execute: async (_, api: TextAreaTextApi) => {\r\n      if (insertImageRef.current) {\r\n        const result = await getImage();\r\n        if (!result) return toast.error(\"Failed to load image\");\r\n\r\n        const imageSizeInMb = fileSizeToMb(result.size);\r\n        if (imageSizeInMb >= 4.3)\r\n          return toast.error(\r\n            \"Ukuran file terlalu besar! Ukuran maximum 4,3 MB\",\r\n          );\r\n\r\n        const data = new FormData();\r\n\r\n        data.append(\"file\", result!);\r\n        data.append(\"hostType\", hostType);\r\n        const toastId = toast.loading(\"Uploading image...\");\r\n        const upload = await fetch(\"/api/upload/image\", {\r\n          method: \"POST\",\r\n          body: data,\r\n        }).then((res) => res.json());\r\n\r\n        if (upload.status != 201) {\r\n          toast.error(\"Ukuran file terlalu besar! Ukuran maximum 4,3 MB\", {\r\n            id: toastId,\r\n          });\r\n        } else {\r\n          const modifyText = `![user image](${upload.data?.url})\\n`;\r\n          api.replaceSelection(modifyText);\r\n          toast.success(\"Sukses upload gambar\", { id: toastId });\r\n        }\r\n        insertImageRef!.current!.value = \"\";\r\n      }\r\n    },\r\n  };\r\n\r\n  function getImage(): Promise<File | null | undefined> {\r\n    return new Promise((resolve, reject) => {\r\n      if (insertImageRef.current) {\r\n        insertImageRef.current.onchange = () => {\r\n          try {\r\n            if (!confirm(\"Upload this image?\")) {\r\n              insertImageRef!.current!.value = \"\";\r\n              return;\r\n            }\r\n            resolve(insertImageRef.current?.files?.[0]!);\r\n          } catch (e) {\r\n            reject(e);\r\n          }\r\n        };\r\n        insertImageRef.current?.click();\r\n      }\r\n    });\r\n  }\r\n\r\n  const commands = [\r\n    bold,\r\n    italic,\r\n    strikethrough,\r\n    hr,\r\n    title,\r\n    divider,\r\n    link,\r\n    quote,\r\n    code,\r\n    codeBlock,\r\n    comment,\r\n    insertImage,\r\n    table,\r\n    divider,\r\n    unorderedListCommand,\r\n    orderedListCommand,\r\n    checkedListCommand,\r\n  ];\r\n\r\n  return (\r\n    <div data-color-mode=\"light\">\r\n      <label htmlFor=\"textEditor\">{label ?? \"Text Editor\"}</label>\r\n      <input\r\n        type=\"file\"\r\n        hidden\r\n        name=\"insertImage\"\r\n        ref={insertImageRef}\r\n        accept=\"image/gif,image/jpeg,image/jpg,image/png,image/webp,image/svg\"\r\n      />\r\n      <MDEditor\r\n        value={value}\r\n        onChange={onChange}\r\n        className=\"[&>div.w-md-editor-content>div.w-md-editor-preview]:prose\"\r\n        height={600}\r\n        style={{\r\n          backgroundColor: \"#fff\",\r\n          color: \"#000\",\r\n          fontFamily: \"inherit\",\r\n          padding: 0,\r\n        }}\r\n        id=\"textEditor\"\r\n        commands={commands}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAGA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAmBA;AACA;AACA;;;AAxBA;;;;;;AA0Be,SAAS,OAAO,EAC7B,KAAK,EACL,QAAQ,EACR,KAAK,EACL,WAAW,YAAY,EASxB;;IACC,MAAM,iBAAiB,CAAA,GAAA,6JAAA,CAAA,SAAM,AAAD,EAAoB;IAEhD,MAAM,cAAiC;QACrC,MAAM;QACN,YAAY;QACZ,aAAa;YAAE,cAAc;QAAkB;QAC/C,oBAAM,6LAAC,iJAAA,CAAA,cAAW;;;;;QAClB,SAAS,OAAO,GAAG;YACjB,IAAI,eAAe,OAAO,EAAE;gBAC1B,MAAM,SAAS,MAAM;gBACrB,IAAI,CAAC,QAAQ,OAAO,2IAAA,CAAA,QAAK,CAAC,KAAK,CAAC;gBAEhC,MAAM,gBAAgB,CAAA,GAAA,sIAAA,CAAA,eAAY,AAAD,EAAE,OAAO,IAAI;gBAC9C,IAAI,iBAAiB,KACnB,OAAO,2IAAA,CAAA,QAAK,CAAC,KAAK,CAChB;gBAGJ,MAAM,OAAO,IAAI;gBAEjB,KAAK,MAAM,CAAC,QAAQ;gBACpB,KAAK,MAAM,CAAC,YAAY;gBACxB,MAAM,UAAU,2IAAA,CAAA,QAAK,CAAC,OAAO,CAAC;gBAC9B,MAAM,SAAS,MAAM,MAAM,qBAAqB;oBAC9C,QAAQ;oBACR,MAAM;gBACR,GAAG,IAAI,CAAC,CAAC,MAAQ,IAAI,IAAI;gBAEzB,IAAI,OAAO,MAAM,IAAI,KAAK;oBACxB,2IAAA,CAAA,QAAK,CAAC,KAAK,CAAC,oDAAoD;wBAC9D,IAAI;oBACN;gBACF,OAAO;oBACL,MAAM,aAAa,CAAC,cAAc,EAAE,OAAO,IAAI,EAAE,IAAI,GAAG,CAAC;oBACzD,IAAI,gBAAgB,CAAC;oBACrB,2IAAA,CAAA,QAAK,CAAC,OAAO,CAAC,wBAAwB;wBAAE,IAAI;oBAAQ;gBACtD;gBACA,eAAgB,OAAO,CAAE,KAAK,GAAG;YACnC;QACF;IACF;IAEA,SAAS;QACP,OAAO,IAAI,QAAQ,CAAC,SAAS;YAC3B,IAAI,eAAe,OAAO,EAAE;gBAC1B,eAAe,OAAO,CAAC,QAAQ,GAAG;oBAChC,IAAI;wBACF,IAAI,CAAC,QAAQ,uBAAuB;4BAClC,eAAgB,OAAO,CAAE,KAAK,GAAG;4BACjC;wBACF;wBACA,QAAQ,eAAe,OAAO,EAAE,OAAO,CAAC,EAAE;oBAC5C,EAAE,OAAO,GAAG;wBACV,OAAO;oBACT;gBACF;gBACA,eAAe,OAAO,EAAE;YAC1B;QACF;IACF;IAEA,MAAM,WAAW;QACf,4KAAA,CAAA,OAAI;QACJ,8KAAA,CAAA,SAAM;QACN,qLAAA,CAAA,gBAAa;QACb,0KAAA,CAAA,KAAE;QACF,6KAAA,CAAA,QAAK;QACL,+KAAA,CAAA,UAAO;QACP,4KAAA,CAAA,OAAI;QACJ,6KAAA,CAAA,QAAK;QACL,4KAAA,CAAA,OAAI;QACJ,4KAAA,CAAA,YAAS;QACT,+KAAA,CAAA,UAAO;QACP;QACA,6KAAA,CAAA,QAAK;QACL,+KAAA,CAAA,UAAO;QACP,4KAAA,CAAA,uBAAoB;QACpB,4KAAA,CAAA,qBAAkB;QAClB,4KAAA,CAAA,qBAAkB;KACnB;IAED,qBACE,6LAAC;QAAI,mBAAgB;;0BACnB,6LAAC;gBAAM,SAAQ;0BAAc,SAAS;;;;;;0BACtC,6LAAC;gBACC,MAAK;gBACL,MAAM;gBACN,MAAK;gBACL,KAAK;gBACL,QAAO;;;;;;0BAET,6LAAC,iLAAA,CAAA,UAAQ;gBACP,OAAO;gBACP,UAAU;gBACV,WAAU;gBACV,QAAQ;gBACR,OAAO;oBACL,iBAAiB;oBACjB,OAAO;oBACP,YAAY;oBACZ,SAAS;gBACX;gBACA,IAAG;gBACH,UAAU;;;;;;;;;;;;AAIlB;GAzHwB;KAAA","debugId":null}},
    {"offset": {"line": 323, "column": 0}, "map": {"version":3,"sources":["file:///C:/Coding/Moklet%20Portal%201/infra-competition-frontend/src/app/admin/posts/components/Form.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { ChangeEvent, useState } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport Layout from \"@/app/admin/layout\";\r\nimport { PhotoIcon, ArrowLeftIcon } from \"@heroicons/react/24/outline\";\r\nimport Editor from \"../../components/MdEditor\";\r\n\r\nexport default function CreatePostPage() {\r\n  const router = useRouter();\r\n  const [formData, setFormData] = useState<{\r\n    title: string;\r\n    description: string;\r\n    slug: string;\r\n    category: string;\r\n    tags: string[];\r\n    content: string;\r\n    thumbnail: File | null;\r\n    status: string;\r\n  }>({\r\n    title: \"\",\r\n    description: \"\",\r\n    slug: \"\",\r\n    category: \"\",\r\n    tags: [],\r\n    content: \"\",\r\n    thumbnail: null,\r\n    status: \"draft\",\r\n  });\r\n  const [previewImage, setPreviewImage] = useState<string | null>(null);\r\n\r\n  const categories = [\r\n    \"Pengumuman\",\r\n    \"Berita\",\r\n    \"Event\",\r\n    \"Kegiatan\",\r\n    \"Prestasi\",\r\n    \"Tutorial\",\r\n  ];\r\n\r\n  const availableTags = [\r\n    \"OSIS\",\r\n    \"MPK\",\r\n    \"Akademik\",\r\n    \"Non-Akademik\",\r\n    \"Lomba\",\r\n    \"Workshop\",\r\n    \"Seminar\",\r\n    \"Ekstrakurikuler\",\r\n  ];\r\n\r\n  const handleInputChange = (\r\n    e: React.ChangeEvent<\r\n      HTMLInputElement | HTMLTextAreaElement | HTMLSelectElement\r\n    >\r\n  ) => {\r\n    const { name, value } = e.target;\r\n    setFormData((prev) => ({\r\n      ...prev,\r\n      [name]: value,\r\n    }));\r\n\r\n    if (name === \"title\") {\r\n      const slug = value\r\n        .toLowerCase()\r\n        .replace(/[^a-z0-9]+/g, \"-\")\r\n        .replace(/(^-|-$)/g, \"\");\r\n      setFormData((prev) => ({\r\n        ...prev,\r\n        slug: slug,\r\n      }));\r\n    }\r\n  };\r\n\r\n  const handleFileChange = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    const files = event.target.files;\r\n    if (files && files.length > 0) {\r\n      const file = files[0];\r\n      setFormData((prev) => ({\r\n        ...prev,\r\n        thumbnail: file,\r\n      }));\r\n\r\n      const reader = new FileReader();\r\n      reader.onloadend = () => {\r\n        setPreviewImage(reader.result as string);\r\n      };\r\n      reader.readAsDataURL(file);\r\n    }\r\n  };\r\n\r\n  const handleSubmit = (e: React.FormEvent, status = \"draft\") => {\r\n    e.preventDefault();\r\n\r\n    console.log(\"Submitting post:\", { ...formData, status });\r\n\r\n    // Redirect back to posts list\r\n    router.push(\"/posts\");\r\n  };\r\n\r\n  const handleTagToggle = (tag: string): void => {\r\n    setFormData((prev) => ({\r\n      ...prev,\r\n      tags: prev.tags.includes(tag)\r\n        ? prev.tags.filter((t) => t !== tag)\r\n        : [...prev.tags, tag],\r\n    }));\r\n  };\r\n\r\n  return (\r\n      <div className=\"p-6\">\r\n        <div className=\"max-w-4xl mx-auto\">\r\n          {/* Header */}\r\n          <div className=\"mb-8\">\r\n            <button\r\n              onClick={() => router.back()}\r\n              className=\"mb-4 text-gray-600 hover:text-gray-900 flex items-center space-x-2\"\r\n            >\r\n              <ArrowLeftIcon className=\"w-5 h-5\" />\r\n              <span>Kembali</span>\r\n            </button>\r\n\r\n            <h1 className=\"text-2xl font-bold text-gray-900\">\r\n              Create New Post\r\n            </h1>\r\n            <div className=\"mt-2 flex items-center space-x-2 text-sm text-gray-600\">\r\n              <span>Home</span>\r\n              <span>/</span>\r\n              <span>Admin</span>\r\n              <span>/</span>\r\n              <span>Posts</span>\r\n              <span>/</span>\r\n              <span className=\"text-gray-900\">Create</span>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Form */}\r\n          <form\r\n            onSubmit={(e) => handleSubmit(e, \"publish\")}\r\n            className=\"space-y-6\"\r\n          >\r\n            <div className=\"bg-white rounded-lg shadow p-6 space-y-6\">\r\n              {/* Judul Post */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Judul Post<span className=\"text-red-500\">*</span>\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"title\"\r\n                  value={formData.title}\r\n                  onChange={handleInputChange}\r\n                  placeholder=\"Masukkan judul post...\"\r\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent\"\r\n                  required\r\n                />\r\n              </div>\r\n\r\n              {/* Description */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Deskripsi<span className=\"text-red-500\">*</span>\r\n                </label>\r\n                <textarea\r\n                  name=\"description\"\r\n                  value={formData.description}\r\n                  onChange={handleInputChange}\r\n                  placeholder=\"Deskripsi singkat tentang post...\"\r\n                  rows={3}\r\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent\"\r\n                  required\r\n                />\r\n              </div>\r\n\r\n              {/* Slug */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Custom Slug\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"slug\"\r\n                  value={formData.slug}\r\n                  onChange={handleInputChange}\r\n                  placeholder=\"custom-url-slug\"\r\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent\"\r\n                />\r\n              </div>\r\n\r\n              {/* Category */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Kategori<span className=\"text-red-500\">*</span>\r\n                </label>\r\n                <select\r\n                  name=\"category\"\r\n                  value={formData.category}\r\n                  onChange={handleInputChange}\r\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent\"\r\n                  required\r\n                >\r\n                  <option value=\"\">Select...</option>\r\n                  {categories.map((cat) => (\r\n                    <option key={cat} value={cat}>\r\n                      {cat}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n\r\n              {/* Tags */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Tags\r\n                </label>\r\n                <div className=\"flex flex-wrap gap-2\">\r\n                  {availableTags.map((tag) => (\r\n                    <button\r\n                      key={tag}\r\n                      type=\"button\"\r\n                      onClick={() => handleTagToggle(tag)}\r\n                      className={`px-3 py-1 rounded-full text-sm font-medium transition-colors ${\r\n                        formData.tags.includes(tag)\r\n                          ? \"bg-red-500 text-white\"\r\n                          : \"bg-gray-200 text-gray-700 hover:bg-gray-300\"\r\n                      }`}\r\n                    >\r\n                      {tag}\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Thumbnail */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Thumbnail<span className=\"text-red-500\">*</span>\r\n                </label>\r\n                <div className=\"flex items-start space-x-4\">\r\n                  <div className=\"w-48 h-48 bg-gray-100 rounded-lg overflow-hidden flex items-center justify-center\">\r\n                    {previewImage ? (\r\n                      <img\r\n                        src={previewImage}\r\n                        alt=\"Preview\"\r\n                        className=\"w-full h-full object-cover\"\r\n                      />\r\n                    ) : (\r\n                      <PhotoIcon className=\"w-16 h-16 text-gray-400\" />\r\n                    )}\r\n                  </div>\r\n                  <div className=\"flex-1\">\r\n                    <input\r\n                      type=\"file\"\r\n                      onChange={handleFileChange}\r\n                      accept=\"image/*\"\r\n                      className=\"hidden\"\r\n                      id=\"thumbnail-upload\"\r\n                    />\r\n                    <label\r\n                      htmlFor=\"thumbnail-upload\"\r\n                      className=\"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 cursor-pointer\"\r\n                    >\r\n                      Choose File\r\n                    </label>\r\n                    {formData.thumbnail && (\r\n                      <p className=\"mt-2 text-sm text-gray-500\">\r\n                        {formData.thumbnail.name}\r\n                      </p>\r\n                    )}\r\n                    <p className=\"mt-2 text-xs text-gray-500\">\r\n                      Recommended size: 1200x630px. Max file size: 2MB\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Content Editor */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Text Editor<span className=\"text-red-500\">*</span>\r\n                </label>\r\n                <Editor\r\n                  value={\"\"}\r\n                  onChange={function (\r\n                    value?: string | undefined,\r\n                    event?: ChangeEvent<HTMLTextAreaElement> | undefined\r\n                  ): void {\r\n                    throw new Error(\"Function not implemented.\");\r\n                  }}\r\n                />\r\n              </div>\r\n\r\n              {/* Action Buttons */}\r\n              <div className=\"flex justify-end space-x-4 pt-6 border-t\">\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => router.back()}\r\n                  className=\"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50\"\r\n                >\r\n                  Cancel\r\n                </button>\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={(e) => handleSubmit(e, \"draft\")}\r\n                  className=\"px-6 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600\"\r\n                >\r\n                  Save as Draft\r\n                </button>\r\n                <button\r\n                  type=\"submit\"\r\n                  className=\"px-6 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600\"\r\n                >\r\n                  Simpan\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AAEA;AAAA;AACA;;;AANA;;;;;AAQe,SAAS;;IACtB,MAAM,SAAS,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EASpC;QACD,OAAO;QACP,aAAa;QACb,MAAM;QACN,UAAU;QACV,MAAM,EAAE;QACR,SAAS;QACT,WAAW;QACX,QAAQ;IACV;IACA,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAiB;IAEhE,MAAM,aAAa;QACjB;QACA;QACA;QACA;QACA;QACA;KACD;IAED,MAAM,gBAAgB;QACpB;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IAED,MAAM,oBAAoB,CACxB;QAIA,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,EAAE,MAAM;QAChC,YAAY,CAAC,OAAS,CAAC;gBACrB,GAAG,IAAI;gBACP,CAAC,KAAK,EAAE;YACV,CAAC;QAED,IAAI,SAAS,SAAS;YACpB,MAAM,OAAO,MACV,WAAW,GACX,OAAO,CAAC,eAAe,KACvB,OAAO,CAAC,YAAY;YACvB,YAAY,CAAC,OAAS,CAAC;oBACrB,GAAG,IAAI;oBACP,MAAM;gBACR,CAAC;QACH;IACF;IAEA,MAAM,mBAAmB,CAAC;QACxB,MAAM,QAAQ,MAAM,MAAM,CAAC,KAAK;QAChC,IAAI,SAAS,MAAM,MAAM,GAAG,GAAG;YAC7B,MAAM,OAAO,KAAK,CAAC,EAAE;YACrB,YAAY,CAAC,OAAS,CAAC;oBACrB,GAAG,IAAI;oBACP,WAAW;gBACb,CAAC;YAED,MAAM,SAAS,IAAI;YACnB,OAAO,SAAS,GAAG;gBACjB,gBAAgB,OAAO,MAAM;YAC/B;YACA,OAAO,aAAa,CAAC;QACvB;IACF;IAEA,MAAM,eAAe,CAAC,GAAoB,SAAS,OAAO;QACxD,EAAE,cAAc;QAEhB,QAAQ,GAAG,CAAC,oBAAoB;YAAE,GAAG,QAAQ;YAAE;QAAO;QAEtD,8BAA8B;QAC9B,OAAO,IAAI,CAAC;IACd;IAEA,MAAM,kBAAkB,CAAC;QACvB,YAAY,CAAC,OAAS,CAAC;gBACrB,GAAG,IAAI;gBACP,MAAM,KAAK,IAAI,CAAC,QAAQ,CAAC,OACrB,KAAK,IAAI,CAAC,MAAM,CAAC,CAAC,IAAM,MAAM,OAC9B;uBAAI,KAAK,IAAI;oBAAE;iBAAI;YACzB,CAAC;IACH;IAEA,qBACI,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;;8BAEb,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BACC,SAAS,IAAM,OAAO,IAAI;4BAC1B,WAAU;;8CAEV,6LAAC,4NAAA,CAAA,gBAAa;oCAAC,WAAU;;;;;;8CACzB,6LAAC;8CAAK;;;;;;;;;;;;sCAGR,6LAAC;4BAAG,WAAU;sCAAmC;;;;;;sCAGjD,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;8CAAK;;;;;;8CACN,6LAAC;8CAAK;;;;;;8CACN,6LAAC;8CAAK;;;;;;8CACN,6LAAC;8CAAK;;;;;;8CACN,6LAAC;8CAAK;;;;;;8CACN,6LAAC;8CAAK;;;;;;8CACN,6LAAC;oCAAK,WAAU;8CAAgB;;;;;;;;;;;;;;;;;;8BAKpC,6LAAC;oBACC,UAAU,CAAC,IAAM,aAAa,GAAG;oBACjC,WAAU;8BAEV,cAAA,6LAAC;wBAAI,WAAU;;0CAEb,6LAAC;;kDACC,6LAAC;wCAAM,WAAU;;4CAA+C;0DACpD,6LAAC;gDAAK,WAAU;0DAAe;;;;;;;;;;;;kDAE3C,6LAAC;wCACC,MAAK;wCACL,MAAK;wCACL,OAAO,SAAS,KAAK;wCACrB,UAAU;wCACV,aAAY;wCACZ,WAAU;wCACV,QAAQ;;;;;;;;;;;;0CAKZ,6LAAC;;kDACC,6LAAC;wCAAM,WAAU;;4CAA+C;0DACrD,6LAAC;gDAAK,WAAU;0DAAe;;;;;;;;;;;;kDAE1C,6LAAC;wCACC,MAAK;wCACL,OAAO,SAAS,WAAW;wCAC3B,UAAU;wCACV,aAAY;wCACZ,MAAM;wCACN,WAAU;wCACV,QAAQ;;;;;;;;;;;;0CAKZ,6LAAC;;kDACC,6LAAC;wCAAM,WAAU;kDAA+C;;;;;;kDAGhE,6LAAC;wCACC,MAAK;wCACL,MAAK;wCACL,OAAO,SAAS,IAAI;wCACpB,UAAU;wCACV,aAAY;wCACZ,WAAU;;;;;;;;;;;;0CAKd,6LAAC;;kDACC,6LAAC;wCAAM,WAAU;;4CAA+C;0DACtD,6LAAC;gDAAK,WAAU;0DAAe;;;;;;;;;;;;kDAEzC,6LAAC;wCACC,MAAK;wCACL,OAAO,SAAS,QAAQ;wCACxB,UAAU;wCACV,WAAU;wCACV,QAAQ;;0DAER,6LAAC;gDAAO,OAAM;0DAAG;;;;;;4CAChB,WAAW,GAAG,CAAC,CAAC,oBACf,6LAAC;oDAAiB,OAAO;8DACtB;mDADU;;;;;;;;;;;;;;;;;0CAQnB,6LAAC;;kDACC,6LAAC;wCAAM,WAAU;kDAA+C;;;;;;kDAGhE,6LAAC;wCAAI,WAAU;kDACZ,cAAc,GAAG,CAAC,CAAC,oBAClB,6LAAC;gDAEC,MAAK;gDACL,SAAS,IAAM,gBAAgB;gDAC/B,WAAW,CAAC,6DAA6D,EACvE,SAAS,IAAI,CAAC,QAAQ,CAAC,OACnB,0BACA,+CACJ;0DAED;+CATI;;;;;;;;;;;;;;;;0CAgBb,6LAAC;;kDACC,6LAAC;wCAAM,WAAU;;4CAA+C;0DACrD,6LAAC;gDAAK,WAAU;0DAAe;;;;;;;;;;;;kDAE1C,6LAAC;wCAAI,WAAU;;0DACb,6LAAC;gDAAI,WAAU;0DACZ,6BACC,6LAAC;oDACC,KAAK;oDACL,KAAI;oDACJ,WAAU;;;;;yEAGZ,6LAAC,oNAAA,CAAA,YAAS;oDAAC,WAAU;;;;;;;;;;;0DAGzB,6LAAC;gDAAI,WAAU;;kEACb,6LAAC;wDACC,MAAK;wDACL,UAAU;wDACV,QAAO;wDACP,WAAU;wDACV,IAAG;;;;;;kEAEL,6LAAC;wDACC,SAAQ;wDACR,WAAU;kEACX;;;;;;oDAGA,SAAS,SAAS,kBACjB,6LAAC;wDAAE,WAAU;kEACV,SAAS,SAAS,CAAC,IAAI;;;;;;kEAG5B,6LAAC;wDAAE,WAAU;kEAA6B;;;;;;;;;;;;;;;;;;;;;;;;0CAQhD,6LAAC;;kDACC,6LAAC;wCAAM,WAAU;;4CAA+C;0DACnD,6LAAC;gDAAK,WAAU;0DAAe;;;;;;;;;;;;kDAE5C,6LAAC,iJAAA,CAAA,UAAM;wCACL,OAAO;wCACP,UAAU,SACR,KAA0B,EAC1B,KAAoD;4CAEpD,MAAM,IAAI,MAAM;wCAClB;;;;;;;;;;;;0CAKJ,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;wCACC,MAAK;wCACL,SAAS,IAAM,OAAO,IAAI;wCAC1B,WAAU;kDACX;;;;;;kDAGD,6LAAC;wCACC,MAAK;wCACL,SAAS,CAAC,IAAM,aAAa,GAAG;wCAChC,WAAU;kDACX;;;;;;kDAGD,6LAAC;wCACC,MAAK;wCACL,WAAU;kDACX;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASjB;GAxTwB;;QACP,qIAAA,CAAA,YAAS;;;KADF","debugId":null}}]
}